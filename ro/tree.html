<!doctype html>
<html>

<head>

    <meta charset="utf-8">
    <script src="js/d3-fetch.v1.min.js"></script>
    <script src="js/d3-dsv.v1.min.js"></script>
    <script src="js/d3-selection.v1.min.js"></script>
    <script src="https://d3plus.org/js/d3plus-hierarchy.v0.8.full.min.js"></script>

    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>

</head>

<body></body>

<script>
    // var cols=['üéôÔ∏è Felsz√≥lal√°sok', 'üí∫ √úl√©sek','üìö Javaslatok', 'üßæ Nyilatkozatok'];
    var cols = ['üéôÔ∏è Felsz√≥lal√°sok', 'üìö Javaslatok', 'üßæ Nyilatkozatok'];
    d3.json('json/member_activity.json').then(function (activitydata) {
        var name = 'KELEMEN Hunor'
        var data = [];
        Object.keys(activitydata).forEach(function (name) {
            if (activitydata[name].length > 2) {
                activitydata[name].forEach(function (d) {
                    cols.forEach(function (c) {
                        var dummy = { 'T√∂rv√©nyhoz√°s': d['Session'] }
                        if (d[c] > 0) {
                            dummy['√ârt√©k'] = parseInt(d[c])
                            dummy['id'] = d['Name']
                            dummy['T√≠pus'] = c
                            data.push(dummy)
                        }
                    })
                })
            }
        })
        console.log(data)
        new d3plus.Treemap()
            .data(data)
            .groupBy(["id", 'T√≠pus'])
            .depth(0)
            .sum("√ârt√©k")
            .time('T√∂rv√©nyhoz√°s')
            .legend(false)
            .tooltip('√ârt√©k')
            .render();
    })
</script>

</html>